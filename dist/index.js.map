{"version":3,"file":"index.js","sources":["../src/lib/calender-context.ts","../src/constant/index.ts","../src/tools/persian-date-tools.ts","../src/components/days/RenderDays.tsx","../src/components/days/DaysBox.tsx","../src/components/header/Header.tsx","../src/utils/index.ts","../src/tools/number-tools.ts","../src/index.tsx"],"sourcesContent":["import { Context, createContext } from 'react'\n\ninterface CalenderSharedItems {\n  year?: number\n  setYear: Function\n  month?: number\n  setMonth: Function\n  selectedDay?: DateItem\n  daysRange?: DayRange\n  setDaysRange?: Function\n  setSelectedDay?: Function\n  selectMethod?: DaySelectType\n  onSelect?: (day: DateItem) => void\n  changeMonth: (action: MonthSwitchType) => void\n  currentMonth: string\n  currentYear: string\n}\n\n// @ts-ignore\nconst CalenderContext: Context<CalenderSharedItems> = createContext({})\nexport default CalenderContext\n","// @ts-nocheck\nconst REGEX = {\n  PER_NUM: /[۰-۹]/g,\n  EN_NUM: /[0-9]/g\n}\n\nenum COLORS {\n  TXT = '#000',\n  TRANSPARENT = 'transparent',\n  ACCENT = '#273c75',\n  HOLIDAY_BG = '#F24919',\n  HOLIDAY_TXT = '#290000',\n  NORMAL_DAY_BG = '#bcbcbc',\n  TODAY_BG = '#666666',\n  BORDER = '#414141'\n}\n\nenum WEEK_DAYS {\n  'Saturday' = 'شنبه',\n  'Sunday' = 'یکشنبه',\n  'Monday' = 'دوشنبه',\n  'Tuesday' = 'سەشنبە',\n  'Wednesday' = 'چهارشنبه',\n  'Thursday' = 'پنجشنبه',\n  'Friday' = 'جمعه'\n}\n\nenum PERSIAN_MONTH {\n  فروردین,\n  اردیبهشت,\n  خرداد,\n  تیر,\n  مرداد,\n  شهریور,\n  مهر,\n  آبان,\n  آذر,\n  دی,\n  بهمن,\n  اسفند\n}\n\nexport { REGEX, COLORS, WEEK_DAYS, PERSIAN_MONTH }\n","//@ts-nocheck\nimport jalaali, { JalaaliDateObject } from 'jalaali-js'\nimport { PERSIAN_MONTH } from '../constant'\n\nclass PersianDateTools {\n  private readonly locale: 'fa' | 'en'\n  private readonly todayDateIntl: Date\n  private readonly todayDatePer: JalaaliDateObject\n  private static instance: PersianDateTools\n\n  private constructor() {\n    this.locale = 'fa'\n    this.todayDateIntl = new Date(Date.now())\n    this.todayDatePer = jalaali.toJalaali(this.todayDateIntl)\n  }\n\n  static getSingletonInstance(): PersianDateTools {\n    if (!PersianDateTools.instance)\n      PersianDateTools.instance = new PersianDateTools()\n    return PersianDateTools.instance\n  }\n\n  private grabDate(options: Intl.DateTimeFormatOptions): number | string {\n    return this.todayDateIntl.toLocaleDateString(this.locale, options)\n  }\n\n  private convertToIntlDate = (\n    year: number,\n    month: number,\n    day: number\n  ): Date => {\n    return jalaali.jalaaliToDateObject(year, month, day)\n  }\n\n  get currentDate(): CurrentDate {\n    return {\n      year: this.todayDatePer.jy,\n      month: {\n        number: this.todayDatePer.jm,\n        name: this.grabDate({ month: 'long' })\n      },\n      day: {\n        number: this.todayDatePer.jd,\n        name: this.grabDate({ weekday: 'long' })\n      }\n    }\n  }\n\n  getMonthNameByNumber(num: number): string {\n    return PERSIAN_MONTH[num - 1]\n  }\n\n  getMonthLength = (year: number, month: number): number => {\n    return jalaali.jalaaliMonthLength(year, month)\n  }\n\n  getFirstDayOfMonth(year: number, month: number): number {\n    return this.convertToIntlDate(year, month, 2).getDay()\n  }\n\n  isOnCurrentMonth(monthNumber: number): boolean {\n    return (\n      this.getMonthNameByNumber(monthNumber) === this.currentDate.month.name\n    )\n  }\n\n  isToday(year: number, month: number, day: number): boolean {\n    if (year !== this.currentDate.year) return false\n    if (month !== this.currentDate.month.number) return false\n\n    return day === this.todayDatePer.jd\n  }\n\n  isFriday(dayInWeek: number): boolean {\n    // 6th day of the week in the persian calendar is Friday\n    return dayInWeek === 6\n  }\n}\n\nexport default PersianDateTools.getSingletonInstance()\n","import React, { useContext } from 'react'\nimport CalenderContext from '../../lib/calender-context'\nimport { COLORS, WEEK_DAYS } from '../../constant'\nimport perDate from '../../tools/persian-date-tools'\nimport styles from './styles.css'\n\ninterface Props {\n  week: Week\n}\n\nexport default function RenderDays(props: Props) {\n  const { week } = props\n  const { year, month, selectMethod, selectedDay, setSelectedDay, onSelect } =\n    useContext(CalenderContext)\n\n  const checkIfSelectedDay = (dayValue: number): boolean => {\n    if (!dayValue) return false\n    return selectedDay?.dayNumber === dayValue\n  }\n\n  const applyDayTxtColor = (dayInWeek: number, dayValue: number): string => {\n    if (perDate.isToday(year, month, dayValue)) return COLORS.TXT\n    if (checkIfSelectedDay(dayValue)) return COLORS.TXT\n    if (perDate.isFriday(dayInWeek)) return COLORS.HOLIDAY_TXT\n    else return COLORS.TXT\n  }\n\n  const applyDyBgColor = (dayValue: number, dayInWeek: number): string => {\n    const { HOLIDAY_BG, TODAY_BG, TRANSPARENT, NORMAL_DAY_BG, ACCENT } = COLORS\n\n    if (!dayValue) return TRANSPARENT\n    if (checkIfSelectedDay(dayValue)) return ACCENT\n    if (perDate.isToday(year, month, dayValue)) return TODAY_BG\n    if (perDate.isFriday(+dayInWeek)) return HOLIDAY_BG\n\n    return NORMAL_DAY_BG\n  }\n\n  const handleDayClick = (dayValue: number, dayInWeek: number) => {\n    if (!dayValue) return\n\n    let selectionInfo\n    const clickedDayInfo = {\n      year,\n      month,\n      dayNumber: dayValue,\n      dayLabel: Object.values(WEEK_DAYS)[dayInWeek]\n    }\n\n    if (selectMethod === 'single') selectionInfo = pickSingleDay(clickedDayInfo)\n    if (selectMethod === 'range') {\n      // Todo: implement it later\n      // selectionInfo = pickSeveralDays(clickedDayInfo)\n    }\n\n    onSelect(selectionInfo)\n  }\n\n  const pickSingleDay = (clickedDayInfo: DateItem) => {\n    setSelectedDay(\n      selectedDay?.dayNumber === clickedDayInfo.dayNumber ? {} : clickedDayInfo\n    )\n    return clickedDayInfo\n  }\n\n  const pickSeveralDays = (clickedDayInfo: DateItem) => {\n    // Todo: implement it later\n    // const { start, end } = daysRange || {}\n    // if (!start) return setDaysRange({ start: clickedDayInfo })\n    // if (!end) return setDaysRange({ start, end: clickedDayInfo })\n    // if (start?.dayNumber && end?.dayNumber)\n    //   return setDaysRange({ start: clickedDayInfo })\n  }\n\n  return (\n    <tr>\n      {Object.entries(week).map(([dayInWeek, dayValue], i) => (\n        <td\n          key={dayValue || dayInWeek + `${i}`}\n          onClick={() => handleDayClick(dayValue, +dayInWeek)}\n          className={styles.calendarDayNumber}\n          style={{\n            color: applyDayTxtColor(+dayInWeek, dayValue),\n            backgroundColor: applyDyBgColor(dayValue, +dayInWeek)\n          }}\n        >\n          {dayValue}\n        </td>\n      ))}\n    </tr>\n  )\n}\n","import React, { Fragment } from 'react'\nimport { WEEK_DAYS } from '../../constant'\nimport RenderDays from './RenderDays'\nimport styles from './styles.css'\n\ninterface Props {\n  calenderWeekList: Week[]\n}\n\nexport default function DaysBox(props: Props): JSX.Element {\n  const { calenderWeekList } = props\n\n  return (\n    <table className={styles.calendarDayContainer}>\n      <thead>\n        <tr>\n          {Object.values(WEEK_DAYS).map((dayItem) => (\n            <td key={dayItem} className={styles.calendarDays}>\n              {dayItem}\n            </td>\n          ))}\n        </tr>\n      </thead>\n      <tbody>\n        {calenderWeekList.map((week, i) => (\n          <Fragment key={i + Math.random()}>\n            <RenderDays week={week} />\n          </Fragment>\n        ))}\n      </tbody>\n    </table>\n  )\n}\n","import React, { useContext } from 'react'\nimport CalenderContext from 'lib/calender-context'\nimport styles from './styles.css'\n\nexport default function Header(): JSX.Element {\n  const { changeMonth, currentYear, currentMonth } = useContext(CalenderContext)\n\n  return (\n    <header className={styles.calendar__header}>\n      <button onClick={() => changeMonth('prev')} children='‹' />\n      <p>\n        {currentMonth} - {currentYear}\n      </p>\n      <button onClick={() => changeMonth('next')} children='›' />\n    </header>\n  )\n}\n","function generateArr(length: number, formatArr?: Function): any[] {\n  return Array.from({ length }, (v, k) => !!formatArr && formatArr(v, k))\n}\n\nexport { generateArr }\n","// @ts-nocheck\ntype NestedObject = { [key: string]: any }\n\nclass NumberTools {\n  PERSIAN_DIGITS: readonly string[]\n  ENGLISH_DIGITS: readonly string[]\n  REGEX_LIST: NestedObject\n\n  constructor() {\n    this.PERSIAN_DIGITS = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹']\n    this.ENGLISH_DIGITS = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']\n    this.REGEX_LIST = {\n      engNum: /[0-9]/g,\n      perNum: [/۰/g, /۱/g, /۲/g, /۳/g, /۴/g, /۵/g, /۶/g, /۷/g, /۸/g, /۹/g]\n    }\n  }\n\n  private sanitizedTxt(txt: string | number): string {\n    if ([undefined, null].includes(txt)) return ''\n    if (typeof txt === 'number') return txt.toString()\n    return txt\n  }\n\n  toEnglishDigit(txt: string): string {\n    txt = this.sanitizedTxt(txt)\n\n    let i = 0\n    for (i; i < this.PERSIAN_DIGITS.length; i++) {\n      txt = txt.replace(this.REGEX_LIST.perNum[i], i)\n    }\n\n    return txt\n  }\n\n  toPersian(txt: string | number): string {\n    txt = this.sanitizedTxt(txt)\n    return txt.replace(this.REGEX_LIST.engNum, (w) => this.PERSIAN_DIGITS[+w])\n  }\n\n  toCurrency(amount: string | number): string {\n    amount = this.sanitizedTxt(amount)\n    return amount\n  }\n\n  shortenNumber(num: number | string): string {\n    num = this.sanitizedTxt(num)\n    // @ts-ignore\n    return new Intl.NumberFormat('en', { notation: 'compact' }).format(num)\n  }\n\n  addLeadingZero(num: number | string): string {\n    num = this.sanitizedTxt(num)\n    return String(num).padStart(2, '0')\n  }\n}\n\nexport default new NumberTools()\n","import React, { useEffect, useState } from 'react'\nimport CalenderContext from './lib/calender-context'\nimport perDate from './tools/persian-date-tools'\nimport DaysBox from './components/days/DaysBox'\nimport Header from './components/header/Header'\nimport { generateArr } from './utils'\nimport './assets/styles/index.css'\nimport { numberTools } from './tools'\n\ninterface HeaderProps {\n  gotToNextMonth: Function\n  gotToPrevMonth: Function\n  activeDate: {\n    month: string\n    year: string\n  }\n}\n\ninterface Props {\n  onSelect: (day: DateItem) => void\n  customHeader?: (headerProps) => JSX.Element\n}\n\nexport function Calendar(props: Props): JSX.Element {\n  const { onSelect, customHeader } = props\n  const { currentDate } = perDate\n  const [year, setYear] = useState<number>(currentDate.year)\n  const [month, setMonth] = useState<number>(currentDate.month.number)\n  const [selectedDay, setSelectedDay] = useState<DateItem>({})\n  const [daysRange, setDaysRange] = useState<DayRange>({})\n  const selectMethod: DaySelectType = 'single'\n  const monthLength: number = perDate.getMonthLength(year, month)\n  const firstDayOfMonth: number = perDate.getFirstDayOfMonth(year, month)\n  const numberOfRows: 5 | 6 = firstDayOfMonth > 4 ? 6 : 5 // 4 === Wednesday\n\n  const generateCalenderWeeks = (): (() => Week[]) => {\n    let currentDay: number = 1\n\n    const createWeekData = (i) => {\n      const data = {}\n      generateArr(7).forEach((item, j) => (data[j] = getDayValue(j, i)))\n      return data\n    }\n\n    const getDayValue = (weekDayNumber: number, i: number): number => {\n      if (currentDay > monthLength) return\n      if (i !== 0) return currentDay++\n      if (i === 0 && weekDayNumber >= firstDayOfMonth) return currentDay++\n    }\n\n    return () => {\n      return generateArr(numberOfRows).map((item: Week, i) => createWeekData(i))\n    }\n  }\n\n  const calenderWeekList = generateCalenderWeeks()\n\n  const resetSelectedDay = () => selectMethod === 'single' && setSelectedDay({})\n\n  const changeMonth = (action: MonthSwitchType) => {\n    if (action === 'prev') {\n      if (month >= 2) return setMonth(month - 1)\n      else {\n        setYear(year - 1)\n        setMonth(12)\n      }\n    }\n\n    if (action === 'next') {\n      if (month <= 11) return setMonth(month + 1)\n      else {\n        setYear(year + 1)\n        setMonth(1)\n      }\n    }\n  }\n\n  const sharedItems = {\n    year,\n    month,\n    selectedDay,\n    daysRange,\n    setDaysRange,\n    setSelectedDay,\n    selectMethod,\n    setMonth,\n    setYear,\n    onSelect,\n    changeMonth,\n    currentMonth: perDate.getMonthNameByNumber(month),\n    currentYear: numberTools.toPersian(year)\n  }\n\n  const headerProps: HeaderProps = {\n    gotToNextMonth: () => changeMonth('next'),\n    gotToPrevMonth: () => changeMonth('prev'),\n    activeDate: {\n      month: sharedItems.currentMonth,\n      year: sharedItems.currentYear\n    }\n  }\n\n  useEffect(resetSelectedDay, [month, year])\n\n  return (\n    <CalenderContext.Provider value={sharedItems}>\n      {customHeader ? customHeader(headerProps) : <Header />}\n      <DaysBox calenderWeekList={calenderWeekList()} />\n    </CalenderContext.Provider>\n  )\n}\n"],"names":["CalenderContext","createContext","COLORS","WEEK_DAYS","PERSIAN_MONTH","PersianDateTools","year","month","day","jalaali","jalaaliToDateObject","jalaaliMonthLength","locale","todayDateIntl","Date","now","todayDatePer","toJalaali","getSingletonInstance","instance","grabDate","options","toLocaleDateString","getMonthNameByNumber","num","getFirstDayOfMonth","convertToIntlDate","getDay","isOnCurrentMonth","monthNumber","currentDate","name","isToday","number","jd","isFriday","dayInWeek","jy","jm","weekday","RenderDays","props","week","useContext","selectMethod","selectedDay","setSelectedDay","onSelect","checkIfSelectedDay","dayValue","dayNumber","applyDayTxtColor","perDate","TXT","HOLIDAY_TXT","applyDyBgColor","HOLIDAY_BG","TODAY_BG","TRANSPARENT","NORMAL_DAY_BG","ACCENT","handleDayClick","selectionInfo","clickedDayInfo","dayLabel","Object","values","pickSingleDay","React","entries","map","i","key","onClick","className","styles","calendarDayNumber","style","color","backgroundColor","DaysBox","calenderWeekList","calendarDayContainer","dayItem","calendarDays","Fragment","Math","random","Header","changeMonth","currentYear","currentMonth","calendar__header","children","generateArr","length","formatArr","Array","from","v","k","NumberTools","PERSIAN_DIGITS","ENGLISH_DIGITS","REGEX_LIST","engNum","perNum","sanitizedTxt","txt","undefined","includes","toString","toEnglishDigit","replace","toPersian","w","toCurrency","amount","shortenNumber","Intl","NumberFormat","notation","format","addLeadingZero","String","padStart","Calendar","customHeader","useState","setYear","setMonth","daysRange","setDaysRange","monthLength","getMonthLength","firstDayOfMonth","numberOfRows","generateCalenderWeeks","currentDay","createWeekData","data","forEach","item","j","getDayValue","weekDayNumber","resetSelectedDay","action","sharedItems","numberTools","headerProps","gotToNextMonth","gotToPrevMonth","activeDate","useEffect","Provider","value"],"mappings":"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"}